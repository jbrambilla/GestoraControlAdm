@model EGestora.GestoraControlAdm.Application.ViewModels.PessoaViewModel

<div class="row">
    <div class="col-xs-12 col-sm-7 col-md-7 col-lg-4">
        <h1 class="page-title txt-color-blueDark">
            <i class="fa fa-cogs fa-fw "></i> Gerenciar <span>
                >
                Pessoa
            </span>
        </h1>
    </div>
</div>
<article class="col-sm-12 col-md-12 col-lg-12">
    <div class="jarviswidget jarviswidget-color-darken" id="wid-id-0" data-widget-editbutton="false" data-widget-deletebutton="false" data-widget-toglle-button="false">
        <header>
            <span class="widget-icon"> <i class="fa fa-pencil-square-o"></i> </span>
            <h2>Cadastro</h2>

        </header>
        <!-- widget div-->
        <div>

            <!-- widget edit box -->
            <div class="jarviswidget-editbox">
                <!-- This area used as dropdown edit box -->

            </div>
            <!-- end widget edit box -->
            <div class="widget-body">
                <div class="row">
                    @using (Html.BeginForm("Create2", "Pessoas", FormMethod.Post, new { enctype = "multipart/form-data", id="formwizard-1", novalidate="novalidate", @class="smart-form smart-form-sizing-fix" }))
                    {
                        @Html.AntiForgeryToken();
                        @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                        <div id="bootstrap-wizard-1" class="col-sm-12">
                            <div class="form-bootstrapWizard">
                                <ul class="bootstrapWizard form-wizard">
                                    <li class="active" data-target="#step1">
                                        <a href="#tab1" data-toggle="tab"> <span class="step">1</span> <span class="title">Pessoa</span> </a>
                                    </li>
                                    <li data-target="#step2">
                                        <a href="#tab2" data-toggle="tab"> <span class="step">2</span> <span class="title">Endereços</span> </a>
                                    </li>
                                    <li data-target="#step3">
                                        <a href="#tab3" data-toggle="tab"> <span class="step">3</span> <span class="title">Contatos</span> </a>
                                    </li>
                                    <li data-target="#step4">
                                        <a href="#tab4" data-toggle="tab"> <span class="step">4</span> <span class="title">Salvar Pessoa</span> </a>
                                    </li>
                                </ul>
                                <div class="clearfix"></div>
                            </div>
                            <div class="tab-content">
                                <div class="tab-pane active" id="tab1">


                                    <br>
                                    <h3><strong>Parte 1 </strong> - Pessoa</h3>
                                    <fieldset id="fieldsetRadio">
                                        <div class="row">
                                            <section class="col col-6">
                                                <div class="inline-group">
                                                    <label class="radio">
                                                        <input id="fisica" type="radio" name="radio-inline" checked="">
                                                        <i></i>Pessoa Física
                                                    </label>
                                                    <label class="radio">
                                                        <input id="juridica" type="radio" name="radio-inline">
                                                        <i></i>Pessoa Jurídica
                                                    </label>
                                                </div>
                                                
                                            </section>

                                        </div>
                                    </fieldset>
                                    @******** PESSOA FÍSICA ********@

                                    <fieldset id="formPessoaFisica">
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-user"></i>
                                                    @Html.TextBoxFor(m => m.PessoaFisica.Nome, new { placeholder = "Nome" })
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.Nome)
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-user"></i>
                                                    @Html.TextBoxFor(m => m.PessoaFisica.Apelido, new { placeholder = "Apelido" })
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.Apelido)
                                                </label>
                                            </section>
                                        </div>

                                        <div class="row">
                                            <section class="col col-4">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-user"></i>
                                                    @Html.TextBoxFor(m => m.PessoaFisica.Rg, new { placeholder = "RG" })
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.Rg)
                                                </label>
                                            </section>
                                            <section class="col col-2">
                                                <label class="input">

                                                    @Html.TextBoxFor(m => m.PessoaFisica.OrgaoEmissor, new { placeholder = "Orgão Emissor" })
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.OrgaoEmissor)
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-user"></i>
                                                    @Html.TextBoxFor(m => m.PessoaFisica.Cpf, new { placeholder = "CPF" })
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.Cpf)
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-calendar"></i>
                                                    @Html.TextBoxFor(m => m.PessoaFisica.Nascimento, new { placeholder = "Data de Nascimento" })
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.Nome)
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="select">
                                                    @Html.Raw(Html.DropDownList("PessoaFisica.ProfissaoId", (IEnumerable<SelectListItem>)ViewBag.ProfissaoList, "Profissão", new { }).ToHtmlString().Replace("<option value=\"\">Profiss", "<option disabled selected>Profiss"))
                                                    @Html.ValidationMessageFor(m => m.PessoaFisica.ProfissaoId)
                                                    <i></i>
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="select">
                                                    <select name="@Html.NameFor(m => m.PessoaFisica.Genero)">
                                                        <option value="0" selected="" disabled="">Gênero</option>
                                                        <option value="Masculino">Masculino</option>
                                                        <option value="Feminino">Feminino</option>
                                                        <option value="Indefinido">Prefiro não responder</option>
                                                    </select>
                                                    <i></i>
                                                </label>
                                                @Html.ValidationMessageFor(m => m.PessoaFisica.Genero)
                                            </section>
                                            <section class="col col-6">
                                                <label class="select">
                                                    <select name="@Html.NameFor(m => m.PessoaFisica.EstadoCivil)">
                                                        <option value="0" selected="" disabled="">Estado Civil</option>
                                                        <option value="Solteiro">Solteiro</option>
                                                        <option value="Casado">Casado</option>
                                                        <option value="Divorciado">Divorciado</option>
                                                        <option value="Viúvo">Viúvo</option>
                                                    </select>
                                                    <i></i>
                                                </label>
                                                @Html.ValidationMessageFor(m => m.PessoaFisica.EstadoCivil)
                                            </section>
                                        </div>
                                    </fieldset>
                                    @******** FIM DE PESSOA FÍSICA ********@
                                    @******** PESSOA JURÍDICA ********@
                                    <fieldset id="formPessoaJuridica">
                                        <section>
                                            <label class="input">
                                                <i class="icon-prepend fa fa-user"></i>
                                                @Html.TextBoxFor(m => m.PessoaJuridica.RazaoSocial, new { placeholder = "Razão Social" })
                                                @Html.ValidationMessageFor(m => m.PessoaJuridica.RazaoSocial)
                                            </label>
                                        </section>

                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-user"></i>
                                                    @Html.TextBoxFor(m => m.PessoaJuridica.NomeFantasia, new { placeholder = "Nome Fantasia" })
                                                    @Html.ValidationMessageFor(m => m.PessoaJuridica.NomeFantasia)
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-user"></i>
                                                    @Html.TextBoxFor(m => m.PessoaJuridica.Cnpj, new { placeholder = "CNPJ" })
                                                    @Html.ValidationMessageFor(m => m.PessoaJuridica.Cnpj)
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-file"></i>
                                                    @Html.TextBoxFor(m => m.PessoaJuridica.InscricaoMunicipal, new { placeholder = "Inscrição Municipal" })
                                                    @Html.ValidationMessageFor(m => m.PessoaJuridica.InscricaoMunicipal)
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-file"></i>
                                                    @Html.TextBoxFor(m => m.PessoaJuridica.InscricaoEstadual, new { placeholder = "Inscrição Estadual" })
                                                    @Html.ValidationMessageFor(m => m.PessoaJuridica.InscricaoEstadual)
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-calendar"></i>
                                                    @Html.TextBoxFor(m => m.PessoaJuridica.DataFundacao, new { placeholder = "Data de Fundação da Empresa" })
                                                    @Html.ValidationMessageFor(m => m.PessoaJuridica.DataFundacao)
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <i class="icon-prepend fa fa-calendar"></i>
                                                    @Html.TextBoxFor(m => m.PessoaJuridica.DataAniversario, new { placeholder = "Data de Aniversário da Empresa" })
                                                    @Html.ValidationMessageFor(m => m.PessoaJuridica.DataAniversario)
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="select">
                                                    @Html.DropDownList("PessoaJuridica.CnaeId", (IEnumerable<SelectListItem>)ViewBag.CnaeList, String.Empty, new { @class = "select2", style = "width: 100%", id = "cnaeid"})
                                                    @*<select id="cnaeid" style="width: 100%" class="select2" name="@Html.NameFor(m => m.PessoaJuridica.CnaeId)">
                                                        <option value="1">1359 - Codigo Cnae Referente a burguers</option>
                                                        <option value="2">2466 - Aviões e transportes</option>
                                                        <option value="3">9876 - Ferraduras e verdures para cavalos</option>
                                                    </select>*@
                                                </label>
                                                <div class="note">
                                                    Selecione o <strong>Cnae</strong> principal.
                                                </div>
                                                @Html.ValidationMessageFor(m => m.PessoaJuridica.CnaeId)
                                            </section>
                                            <section class="col col-6">
                                                <label class="select">
                                                    @Html.DropDownList("PessoaJuridica.CnaeList", (IEnumerable<SelectListItem>)ViewBag.CnaeList, String.Empty, new { @class = "select2", style = "width: 100%", id = "cnaelist", multiple = "" })
                                                    @*<select id="cnaelist" multiple style="width: 100%" class="select2" name="@Html.NameFor(m => m.PessoaJuridica.CnaeList)">
                                                        <option value="1">1359 - Codigo Cnae Referente a burguers</option>
                                                        <option value="2">2466 - Aviões e transportes</option>
                                                        <option value="3">9876 - Ferraduras e verdures para cavalos</option>
                                                    </select>*@
                                                </label>
                                                <div class="note">
                                                    Selecione os <strong>Cnaes</strong> secundários.
                                                </div>
                                            </section>
                                        </div>
                                    </fieldset>
                                    @******** FIM DE PESSOA JURÍDICA ********@
                                    @******** DADOS COMUMNS ********@
                                    <fieldset>
                                        <div class="row">
                                            <section class="col col-6">
                                                <div class="input input-file">
                                                    <span class="button"><input type="file" id="file" name="file" onchange="this.parentNode.nextSibling.value = this.value">Browse</span><input type="text" placeholder="Inclua seus anexos" readonly="">
                                                </div>
                                            </section>
                                            <section class="col col-6">
                                                <label class="textarea textarea-expandable">
                                                    <i class="icon-append fa fa-comment"></i>
                                                    <textarea rows="3" name="@Html.NameFor(m => m.Observacao)" placeholder="Observação"></textarea>
                                                </label>
                                            </section>
                                        </div>
                                    </fieldset>
                                    @******** FIM DE DADOS COMUNS ********@

                                </div>
                                <div id="tab2" class="tab-pane">
                                    <br>
                                    <h3><strong>Parte 2 </strong> - Endereços</h3>
                                    <fieldset>
                                        <div class="row">
                                            <section class="col-lg-offset-10">
                                                <a href="javascript:void(0);" class="btn btn-labeled btn-success" onclick="adicionarEndereco()"> <span class="btn-label"><i class="glyphicon glyphicon-plus-sign"></i></span>Endereço </a>
                                                <a href="javascript:void(0);" class="btn btn-labeled bg-color-redLight txt-color-white" onclick="removerEndereco()"> <span class="btn-label"><i class="glyphicon glyphicon-trash"></i></span>Endereço </a>
                                            </section>
                                        </div>
                                    </fieldset>

                                    <header></header>
                                    <fieldset name="endereco">
                                        <div class="row">
                                            <section class="col col-8">
                                                <label class="input">
                                                    <input name="EnderecoList[0].Logradouro" type="text" placeholder="Logradouro">
                                                </label>
                                            </section>
                                            <section class="col col-4">
                                                <label class="input">

                                                    <input name="EnderecoList[0].Numero" type="text" placeholder="Número">
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">

                                                    <input name="EnderecoList[0].Complemento" type="text" placeholder="Complemento">
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">

                                                    <input name="EnderecoList[0].Bairro" type="text" placeholder="Bairro">
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-8">
                                                <label class="input">

                                                    <input name="EnderecoList[0].Cidade" type="text" placeholder="Cidade">
                                                </label>
                                            </section>
                                            <section class="col col-4">
                                                <label class="input">

                                                    <input name="EnderecoList[0].Estado" type="text" placeholder="Estado">
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-6">
                                                <label class="input">

                                                    <input name="EnderecoList[0].Cep" type="text" placeholder="CEP" data-mask="99999-999">
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="textarea textarea-expandable">
                                                    <i class="icon-append fa fa-file-text-o"></i>
                                                    <textarea name="EnderecoList[0].Descricao" rows="3" placeholder="Descrição"></textarea>
                                                </label>
                                            </section>
                                        </div>
                                        <section class="col col-1">
                                            <label class="checkbox">
                                                <input type="checkbox" name="EnderecoList[0].Principal">
                                                <i></i>Principal
                                            </label>
                                        </section>
                                        <section class="col col-1">
                                            <label class="checkbox">
                                                <input type="checkbox" name="EnderecoList[0].Entrega">
                                                <i></i>Entrega
                                            </label>
                                        </section>
                                        <section class="col col-1">
                                            <label class="checkbox">
                                                <input type="checkbox" name="EnderecoList[0].Cobranca">
                                                <i></i>Cobrança
                                            </label>
                                        </section>

                                        
                                    </fieldset>


                                </div>
                                <div id="tab3" class="tab-pane">
                                    <br>
                                    <h3><strong>Parte 3 </strong> - Contatos</h3>
                                    <fieldset>
                                        <div class="row">
                                            <section class="col-lg-offset-10">
                                                <a href="javascript:void(0);" class="btn btn-labeled btn-success" onclick="adicionarContato()"> <span class="btn-label"><i class="glyphicon glyphicon-plus-sign"></i></span>Contato </a>
                                                <a href="javascript:void(0);" class="btn btn-labeled bg-color-redLight txt-color-white" onclick="removerContato()"> <span class="btn-label"><i class="glyphicon glyphicon-trash"></i></span>Contato </a>
                                            </section>
                                        </div>
                                    </fieldset>

                                    <header></header>
                                    <fieldset name="contato">
                                        <div class="row">
                                            <section class="col col-4">
                                                <label class="select">
                                                    <select name="ContatoList[0].TipoContatoId">
                                                        <option value="0" selected="" disabled="">Tipo do Contato</option>
                                                        @foreach (EGestora.GestoraControlAdm.Application.ViewModels.TipoContatoViewModel tipoContato in ViewBag.TipoContatoList)
                                                        { 
                                                            <option value="@tipoContato.TipoContatoId" mask="@tipoContato.Mascara">@tipoContato.Nome</option>
                                                        }
                                                    </select>
                                                    <i></i>
                                                </label>
                                            </section>
                                            <section class="col col-6">
                                                <label class="input">
                                                    <input name="ContatoList[0].DescricaoContato" type="text" placeholder="Descrição">
                                                </label>
                                            </section>
                                        </div>
                                        <div class="row">
                                            <section class="col col-4">
                                                <label class="input">
                                                    <input name="ContatoList[0].InformacaoContato" type="text" placeholder="Contato">
                                                </label>
                                            </section>
                                            <section class="col col-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" name="ContatoList[0].Newsletter">
                                                    <i></i>Newsletter
                                                </label>
                                            </section>
                                            <section class="col col-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" name="ContatoList[0].Nfse">
                                                    <i></i>NFSe
                                                </label>
                                            </section>
                                            <section class="col col-1">
                                                <label class="checkbox">
                                                    <input type="checkbox" name="ContatoList[0].Boleto">
                                                    <i></i>Boleto
                                                </label>
                                            </section>
                                        </div>
                                    </fieldset>


                                </div>
                                <div id="tab4" class="tab-pane">
                                    <br>
                                    <h3><strong>Parte 4 </strong> - Salvar</h3>
                                   
                                    <h1 class="text-center text-success"><strong><i class="fa fa-check fa-lg"></i> Completo</strong></h1>
                                    <h4 class="text-center"><a class="btn btn-default" href="#" onclick="document.getElementById('formwizard-1').submit()">Finalizar</a></h4>

                                </div>
                                <div class="form-actions">
                                    <div class="row">
                                        <div class="col-sm-12">
                                            <ul class="pager wizard no-margin">
                                                <!--<li class="previous first disabled">
                                                <a href="javascript:void(0);" class="btn btn-lg btn-default"> First </a>
                                                </li>-->
                                                <li class="previous disabled">
                                                    <a href="javascript:void(0);" class="btn btn-lg btn-default"> Anterior </a>
                                                </li>
                                                <!--<li class="next last">
                                                <a href="javascript:void(0);" class="btn btn-lg btn-primary"> Last </a>
                                                </li>-->
                                                <li class="next">
                                                    <a href="javascript:void(0);" class="btn btn-lg txt-color-darken"> Próximo </a>
                                                </li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    }
                </div>
            </div>
        </div>
    </div>
</article>

@section Scripts{
    @*@Scripts.Render("~/bundles/jqueryval")*@
    <script src="~/Scripts/radioButtonPfPj.js"></script>
    <script src="~/Scripts/enderecoAddRemove.js"></script>
    <script src="~/Scripts/contatoAddRemove.js"></script>
    <script>
        
        $(document).ready(function () {

            pageSetUp();

            $("select[name='ContatoList[0].TipoContatoId']")
            .change(function () {
                var mask = $("option:selected", this).attr("mask");
                $("input[name='ContatoList[0].InformacaoContato").mask(mask);
            });

            var $validator = $("#formwizard-1").validate({

                rules: {
                    Observacao: {
                        required: true
                    }
                },

                messages: {
                    Observacao: "Please specify observacao"
                },

                highlight: function (element) {
                    $(element).closest('.form-group').removeClass('has-success').addClass('has-error');
                },
                unhighlight: function (element) {
                    $(element).closest('.form-group').removeClass('has-error').addClass('has-success'); 
                },
                errorElement: 'span',
                errorClass: 'text-danger',
                errorPlacement: function (error, element) {
                    if (element.parent('.input-group').length) {
                        error.insertAfter(element.parent());
                    } else {
                        error.insertAfter(element);
                    }
                }
            });

            $('#bootstrap-wizard-1').bootstrapWizard({
                'tabClass': 'form-wizard',
                'onNext': function (tab, navigation, index) {
                    var $valid = $("#formwizard-1").valid();
                    if (!$valid) {
                        $validator.focusInvalid();
                        return false;
                    } else {
                        $('#bootstrap-wizard-1').find('.form-wizard').children('li').eq(index - 1).addClass(
                          'complete');
                        $('#bootstrap-wizard-1').find('.form-wizard').children('li').eq(index - 1).find('.step')
                        .html('<i class="fa fa-check"></i>');
                    }
                }
            });
        });
    </script>
}